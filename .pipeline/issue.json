{
  "repository": "phyter1/main",
  "number": 10,
  "title": "docs: Showcase AI guardrails, security measures, and agentic prompting implementation",
  "url": "https://github.com/phyter1/main/issues/10",
  "state": "OPEN",
  "labels": [
    {
      "id": "LA_kwDOQdssdM8AAAACQ49j_A",
      "name": "documentation",
      "description": "Improvements or additions to documentation",
      "color": "0075ca"
    },
    {
      "id": "LA_kwDOQdssdM8AAAACQ49kDA",
      "name": "enhancement",
      "description": "New feature or request",
      "color": "a2eeef"
    }
  ],
  "body": "## Problem\n\nThis portfolio demonstrates world-class AI implementation with comprehensive security guardrails, input sanitization, and sophisticated prompt engineering. These implementation details are a key differentiator showing how to work with AI agents professionally - but they're currently invisible to visitors.\n\nWhen users violate guardrails, they get generic error messages. Instead, this should be an educational moment that showcases the security implementation.\n\n## Current State\n\n**Robust security implementation exists but provides generic feedback:**\n\n### Input Sanitization (`src/lib/input-sanitization.ts`)\n- ‚úÖ Prompt injection detection (30+ patterns)\n  - System instruction override attempts\n  - System prompt extraction attempts\n  - Role switching/confusion attacks\n  - Jailbreak attempts (DAN mode, developer mode)\n  - Instruction delimiter confusion\n  - Encoding/obfuscation attempts\n- ‚úÖ HTML sanitization (XSS prevention)\n- ‚úÖ Suspicious pattern detection\n  - Command injection patterns\n  - SQL injection patterns\n  - Path traversal attempts\n  - Script injection\n- ‚úÖ Token stuffing detection\n- ‚úÖ Special character ratio checking\n\n### Validation & Rate Limiting (API routes)\n- ‚úÖ IP-based rate limiting (10 req/min per IP)\n- ‚úÖ Length limits enforcement\n  - Chat: 2000 chars\n  - Job descriptions: 10000 chars\n  - Max 500 lines\n- ‚úÖ Zod schema validation\n- ‚úÖ Job description keyword validation\n- ‚úÖ Empty/whitespace checking\n\n### Scope Enforcement (System Prompts)\n- ‚úÖ Strict on-topic enforcement\n- ‚úÖ Refuses off-topic questions\n- ‚úÖ Context-aware validation (chat vs assessment)\n- ‚úÖ Output validation (prevents system prompt leaks)\n\n### Security Event Logging\n- ‚úÖ Structured security event logging\n- ‚úÖ Severity classification (low/medium/high)\n- ‚úÖ Type classification (prompt_injection, suspicious_pattern, validation_failure)\n\n**Current User Experience:**\n- Generic error: \"Input contains patterns that attempt to override system instructions\"\n- Generic error: \"Rate limit exceeded. Please try again later.\"\n- Generic error: \"Message exceeds maximum length\"\n\n**No context about WHY or HOW the guardrail works.**\n\n## Desired State\n\nWhen a user violates a guardrail, show them:\n\n1. **Which specific guardrail was triggered**\n   - \"Prompt Injection Detection\"\n   - \"Rate Limiting\"\n   - \"Input Length Validation\"\n   - \"Suspicious Pattern Detection\"\n   - \"Scope Enforcement\"\n\n2. **Why it was triggered**\n   - What pattern was detected (without exposing the exact regex)\n   - What category of attack this prevents\n   - Why this protection exists\n\n3. **How it works**\n   - Brief explanation of the security measure\n   - Link to source code on GitHub\n   - Educational context about AI security\n\n## Implementation: In-App Indicators\n\n### Visual Design\n\n**Error Message Enhancement:**\nInstead of generic errors, show structured feedback:\n\n```\nüõ°Ô∏è Security Guardrail Triggered\n\nGUARDRAIL: Prompt Injection Detection\nSEVERITY: High\nCATEGORY: System Instruction Override\n\nWHY THIS MATTERS:\nYour input contained patterns that attempt to override the AI's \ninstructions. This portfolio demonstrates production-grade AI \nsecurity by detecting and blocking these attempts.\n\nWHAT WAS DETECTED:\nPatterns attempting to change the AI's behavior or extract \nsystem prompts. These are common attack vectors in AI applications.\n\nHOW IT WORKS:\nInput validation using pattern matching against 30+ known \nprompt injection techniques, including role confusion, \ninstruction overrides, and jailbreak attempts.\n\n[View Implementation] ‚Üí src/lib/input-sanitization.ts\n[Learn More About AI Security] ‚Üí /how-it-works\n```\n\n**Rate Limit Feedback:**\n```\n‚è±Ô∏è Rate Limit Protection\n\nGUARDRAIL: IP-Based Rate Limiting\nCURRENT STATUS: 10/10 requests used\nRESET TIME: 42 seconds\n\nWHY THIS MATTERS:\nRate limiting prevents abuse and ensures fair access for all \nvisitors. This is a standard production security practice.\n\nHOW IT WORKS:\nEach IP address is limited to 10 requests per minute using \na sliding window algorithm with automatic cleanup.\n\n[View Implementation] ‚Üí src/app/api/chat/route.ts:57-106\n```\n\n**Length Validation:**\n```\nüìè Input Length Validation\n\nGUARDRAIL: Maximum Length Enforcement\nYOUR INPUT: 2,547 characters\nMAXIMUM ALLOWED: 2,000 characters\nOVERAGE: 547 characters (27% over limit)\n\nWHY THIS MATTERS:\nLength limits prevent token stuffing attacks and excessive \nAPI costs while ensuring responsive performance.\n\nHOW IT WORKS:\nInput is validated before processing using configurable limits \ndefined in INPUT_LIMITS constants.\n\n[View Implementation] ‚Üí src/lib/input-sanitization.ts:104-108\n```\n\n**Suspicious Pattern Detection:**\n```\n‚ö†Ô∏è Suspicious Pattern Detected\n\nGUARDRAIL: Malicious Pattern Detection\nSEVERITY: High\nCATEGORY: XSS/Script Injection\n\nWHY THIS MATTERS:\nYour input contained patterns commonly used in cross-site \nscripting (XSS) attacks. This demonstrates defense-in-depth \nsecurity practices.\n\nWHAT WAS DETECTED:\nHTML script tags or JavaScript execution attempts. While this \nis a chat interface (not vulnerable to traditional XSS), the \nvalidation demonstrates comprehensive security thinking.\n\nHOW IT WORKS:\nPattern matching against known malicious signatures including \nXSS, command injection, SQL injection, and path traversal.\n\n[View Implementation] ‚Üí src/lib/input-sanitization.ts:76-99\n```\n\n**Scope Enforcement:**\n```\nüéØ Scope Enforcement\n\nGUARDRAIL: On-Topic Validation\nCONTEXT: Professional Chat\n\nWHY THIS MATTERS:\nThis AI is configured to discuss Ryan's professional background \nonly. Scope enforcement ensures consistent, focused interactions \nand prevents misuse.\n\nWHAT WAS DETECTED:\nYour question appears to be off-topic (not about professional \nexperience, skills, or projects).\n\nHOW IT WORKS:\nSystem prompts include strict scope definitions with explicit \nrefusal instructions for off-topic queries. Output is validated \nfor professional context.\n\n[View Implementation] ‚Üí src/app/api/chat/route.ts:246-312\n```\n\n## Acceptance Criteria\n\n- [ ] Every guardrail violation shows detailed feedback (not generic errors)\n- [ ] Feedback includes:\n  - [ ] Guardrail name/type\n  - [ ] Severity level (when applicable)\n  - [ ] Why the guardrail exists\n  - [ ] What was detected (without exposing exact patterns)\n  - [ ] How the system works (brief explanation)\n  - [ ] Link to actual source code (GitHub)\n- [ ] UI is educational and professional (not punishing)\n- [ ] Consistent design across all guardrail types\n- [ ] Mobile responsive\n- [ ] Demonstrates AI security best practices\n- [ ] Makes the security implementation a visible portfolio feature\n\n## Technical Requirements\n\n### API Changes\n```typescript\n// Enhanced error response format\ninterface GuardrailViolation {\n  error: string; // User-friendly message (backward compatible)\n  guardrail: {\n    type: 'prompt_injection' | 'rate_limit' | 'length_validation' | 'suspicious_pattern' | 'scope_enforcement';\n    severity: 'low' | 'medium' | 'high';\n    category: string; // Specific category of violation\n    explanation: string; // Why this guardrail exists\n    detected: string; // What was detected (safe to show)\n    implementation: string; // How it works\n    sourceFile: string; // Path to implementation\n    lineNumbers?: string; // Optional line number range\n  };\n}\n```\n\n### UI Components\n- New component: `<GuardrailFeedback />`\n- Displays structured error information\n- Expandable details section\n- Link to source code\n- Educational tone\n\n### Affected Files\n- `src/lib/input-sanitization.ts` - Add detailed feedback to ValidationResult\n- `src/app/api/chat/route.ts` - Return enhanced error structure\n- `src/app/api/fit-assessment/route.ts` - Return enhanced error structure\n- `src/components/ui/guardrail-feedback.tsx` - New component\n- `src/components/sections/ChatInterface.tsx` - Integrate feedback component\n- `src/components/sections/JobFitAnalyzer.tsx` - Integrate feedback component\n\n## Why This Matters\n\n**Educational Portfolio Feature:**\nEvery guardrail violation becomes a teaching moment that demonstrates:\n1. Understanding of AI-specific security threats\n2. Implementation of production-grade safeguards\n3. Defense-in-depth security philosophy\n4. Transparent, educational approach to security\n\n**Differentiator:**\nMost portfolios hide their security. This one makes it a feature - showing visitors exactly how professional AI applications should be built.\n\n**Real-World Application:**\nThis is how production AI systems should provide feedback - clear, educational, and transparent about security measures.\n\nThe implementation IS the resume. Make every interaction showcase the expertise.\n\n## Context\n\nThis is a portfolio for a Tech Lead position focused on AI-first development. The security implementation demonstrates professional-grade AI integration. By making guardrails visible and educational, every \"error\" becomes proof of sophisticated implementation.\n\nVisitors trying to \"break\" the chat should leave impressed by the security, not frustrated by generic errors.",
  "fetched_at": "2026-02-04T22:35:00Z"
}
