{
  "number": 15,
  "title": "feat: Private AI Agent Refinement & Testing Workbench",
  "body": "## Problem\n\nThe chat agent and job fit analyzer have static system prompts and configurations. As experience grows and prompts need refinement, there's no conversational way to:\n- Update agent behaviors and prompts\n- Test changes before deploying to production\n- Refine responses based on real interactions\n- Add new experiences to resume data\n- Compare prompt variations side-by-side\n- Continuously improve agent quality\n\nThis portfolio showcases AI-first development. A private workbench for refining the AI agents themselves would be a perfect meta-demonstration of that philosophy.\n\n## Desired State\n\nBuild a private, authenticated interface for conversational agent refinement and testing.\n\n### Core Features\n\n**1. Private Access**\n- Password-protected or auth-gated interface\n- Accessible only to portfolio owner\n- Route: `/admin/agent-workbench` or similar\n- Simple auth (env variable password) or proper auth provider\n\n**2. Conversational Refinement Interface**\n- Chat with an agent that understands the current system prompts\n- Describe desired changes conversationally\n- Agent proposes prompt modifications\n- Preview changes before applying\n- Version history of all prompt changes\n\n**3. Dual Agent Management**\n- **Chat Agent Tab**: Refine the professional chat system prompt\n- **Job Fit Analyzer Tab**: Refine the job assessment prompts\n- Switch between agents in the UI\n- See current prompts, make changes, test results\n\n**4. Resume Data Updates**\n- Conversationally add new experiences, skills, projects\n- \"I just finished a project using X technology\"\n- Agent updates resume data structure\n- Preview changes to `src/data/resume.ts`\n- Commit changes to codebase (or stage for review)\n\n**5. Testing Interface**\n- Define test cases for each agent\n- Run tests against current prompt\n- Run tests against modified prompt\n- Visual side-by-side comparison\n- Pass/fail criteria for responses\n\n**6. Continuous Refinement Workflow**\n- \"Condense this prompt while maintaining behavior\"\n- \"Make the tone more [X]\"\n- \"Add emphasis on [Y] skill\"\n- Track token usage of prompts over time\n- Suggest optimizations\n\n**7. Visual Test Runner**\n```\nTest: \"What's your TypeScript experience?\"\n\nCURRENT PROMPT:           | MODIFIED PROMPT:\n--------------------------|---------------------------\nResponse:                 | Response:\n\"I have 7 years...\"     | \"I have 7 years...\"\n                          |\nToken count: 247          | Token count: 198\nPass: ✅ Mentions years   | Pass: ✅ Mentions years\nPass: ✅ First person     | Pass: ✅ First person\nFail: ❌ Too verbose      | Pass: ✅ Concise\n```\n\n## Implementation Suggestions\n\n### Architecture\n\n**Route Structure:**\n```\n/admin/agent-workbench\n  ├── /chat-agent          - Refine chat system prompt\n  ├── /job-fit-agent       - Refine job fit prompts\n  ├── /resume-data         - Update resume conversationally\n  ├── /tests               - Define and run test suites\n  └── /history             - Version history of changes\n```\n\n**Data Storage:**\n- Prompt versions: JSON/database with timestamps\n- Test cases: Stored configuration\n- Test results: Cached for comparison\n- Resume updates: Git commits or staged changes\n\n**Authentication:**\n- Simple: Environment variable password\n- Better: NextAuth.js with single admin user\n- Best: Proper auth provider (Clerk, Auth0)\n\n### UI Components\n\n**Main Layout:**\n```tsx\n<AgentWorkbench>\n  <Sidebar>\n    <NavItem>Chat Agent</NavItem>\n    <NavItem>Job Fit Agent</NavItem>\n    <NavItem>Resume Data</NavItem>\n    <NavItem>Test Suite</NavItem>\n    <NavItem>History</NavItem>\n  </Sidebar>\n  \n  <MainContent>\n    <CurrentPromptPanel />\n    <ConversationalEditor />\n    <TestRunner />\n    <ComparisonView />\n  </MainContent>\n</AgentWorkbench>\n```\n\n**Conversational Editor:**\n```tsx\n<ConversationalEditor>\n  <ChatInterface \n    systemPrompt=\"You help refine AI agent prompts\"\n    context={currentAgentPrompt}\n    onSuggestChange={handlePromptChange}\n  />\n  \n  <PromptDiff \n    original={currentPrompt}\n    proposed={suggestedPrompt}\n  />\n  \n  <Actions>\n    <Button onClick={testChanges}>Test This Change</Button>\n    <Button onClick={applyChanges}>Apply Changes</Button>\n    <Button onClick={revert}>Revert</Button>\n  </Actions>\n</ConversationalEditor>\n```\n\n**Test Runner:**\n```tsx\n<TestRunner>\n  <TestCaseList>\n    {testCases.map(test => (\n      <TestCase \n        question={test.question}\n        expectedCriteria={test.criteria}\n        onRun={() => runTest(test)}\n      />\n    ))}\n  </TestCaseList>\n  \n  <ResultsComparison>\n    <Column label=\"Current Prompt\" results={currentResults} />\n    <Column label=\"Modified Prompt\" results={modifiedResults} />\n  </ResultsComparison>\n  \n  <TestMetrics>\n    <Metric label=\"Pass Rate\" value=\"8/10\" />\n    <Metric label=\"Avg Tokens\" value=\"247\" />\n    <Metric label=\"Avg Response Time\" value=\"1.2s\" />\n  </TestMetrics>\n</TestRunner>\n```\n\n### API Routes\n\n**`POST /api/admin/refine-prompt`**\n- Input: Current prompt + conversational refinement request\n- Output: Suggested prompt modifications\n- Uses meta-agent to propose changes\n\n**`POST /api/admin/test-prompt`**\n- Input: Prompt version + test cases\n- Output: Test results with pass/fail criteria\n- Runs test suite against prompt\n\n**`POST /api/admin/update-resume`**\n- Input: Conversational update (\"Add project X\")\n- Output: Proposed resume data changes\n- Preview before committing\n\n**`GET /api/admin/prompt-history`**\n- Returns version history of prompt changes\n- Timestamps, changes, who made them\n\n**`POST /api/admin/deploy-prompt`**\n- Deploys tested prompt to production\n- Updates actual agent system prompts\n- Creates git commit for tracking\n\n## Acceptance Criteria\n\n### Core Functionality\n- [ ] Private/authenticated route accessible only to owner\n- [ ] Conversational interface for refining prompts\n- [ ] Separate tabs for Chat Agent and Job Fit Analyzer\n- [ ] Side-by-side comparison of current vs. modified prompts\n- [ ] Test suite runner with visual results\n- [ ] Ability to define custom test cases\n- [ ] Pass/fail criteria for test responses\n- [ ] Resume data updates conversationally\n\n### Refinement Workflows\n- [ ] \"Make this prompt more concise\"\n- [ ] \"Add emphasis on X skill/experience\"\n- [ ] \"Change tone to be more Y\"\n- [ ] \"Update with new project/experience\"\n- [ ] Token count tracking and optimization\n- [ ] Version history with rollback capability\n\n### Testing Features\n- [ ] Define test questions/scenarios\n- [ ] Expected behavior criteria (first person, mentions years, etc.)\n- [ ] Run tests against current prompt\n- [ ] Run tests against modified prompt\n- [ ] Visual diff of responses\n- [ ] Metrics: pass rate, token count, response time\n- [ ] Export test results\n\n### Deployment\n- [ ] Preview changes before applying\n- [ ] Apply changes to codebase (update source files)\n- [ ] Git commit tracking of prompt changes\n- [ ] Rollback to previous prompt versions\n- [ ] Deploy to production with confirmation\n\n### UI/UX\n- [ ] Clean, professional interface\n- [ ] Mobile responsive\n- [ ] Syntax highlighting for prompts\n- [ ] Diff view for prompt changes\n- [ ] Loading states during tests\n- [ ] Success/error feedback\n\n## Why This Matters\n\n**Meta-Demonstration:**\nThis is AI-first development taken to the next level - using AI to refine AI. It showcases:\n- Sophisticated prompt engineering\n- Test-driven AI development\n- Continuous improvement workflows\n- Production-ready AI tooling\n\n**Practical Value:**\n- Easier to maintain and improve agents over time\n- Test changes before deploying to visitors\n- Track prompt evolution and performance\n- Add experiences without manual code updates\n\n**Portfolio Feature:**\nThis workbench itself becomes a showcase piece - \"Here's how I continuously improve my AI agents using AI.\" Very on-brand for a Tech Lead championing AI-first development.\n\n## Technical Considerations\n\n### Security\n- Strong authentication (not just obscurity)\n- Rate limiting on refinement requests\n- Audit log of all changes\n- Prevent prompt injection in refinement interface\n\n### Prompt Management\n- Store prompts in version control\n- Track changes with git commits\n- Ability to A/B test prompt versions\n- Gradual rollout of prompt changes\n\n### Testing Strategy\n- Unit tests for prompt refinement logic\n- Integration tests for test runner\n- Mock AI responses for faster testing\n- Real API tests for validation\n\n### Performance\n- Cache test results\n- Parallel test execution\n- Streaming for long refinement conversations\n- Optimistic UI updates\n\n## Affected Files\n\n**New Files:**\n- `src/app/admin/agent-workbench/page.tsx` - Main workbench interface\n- `src/app/admin/agent-workbench/layout.tsx` - Auth wrapper\n- `src/components/admin/PromptEditor.tsx` - Conversational editor\n- `src/components/admin/TestRunner.tsx` - Test suite interface\n- `src/components/admin/PromptDiff.tsx` - Diff viewer\n- `src/components/admin/ResumeUpdater.tsx` - Resume data editor\n- `src/app/api/admin/refine-prompt/route.ts` - Refinement API\n- `src/app/api/admin/test-prompt/route.ts` - Testing API\n- `src/app/api/admin/update-resume/route.ts` - Resume update API\n- `src/app/api/admin/deploy-prompt/route.ts` - Deployment API\n- `src/lib/prompt-versioning.ts` - Version control utilities\n- `src/lib/test-runner.ts` - Test execution engine\n- `middleware.ts` - Auth middleware for /admin routes\n\n**Modified Files:**\n- `src/app/api/chat/route.ts` - Make prompt configurable\n- `src/app/api/fit-assessment/route.ts` - Make prompt configurable\n- `src/data/resume.ts` - Support dynamic updates\n- `.env.local.example` - Add admin password/auth config\n\n## Context\n\nThis is a sophisticated meta-feature that demonstrates:\n1. Using AI to improve AI (meta-development)\n2. Test-driven AI engineering\n3. Continuous improvement workflows\n4. Production-grade AI tooling\n\nThe workbench becomes both a practical tool and a portfolio showcase piece - proving that AI-first development isn't just using AI, it's building systems that continuously improve themselves.\n\nThis is the kind of feature that makes interviewers say \"Tell me more about how you built this.\"",
  "labels": [
    {
      "id": "LA_kwDOQdssdM8AAAACQ49kDA",
      "name": "enhancement",
      "description": "New feature or request",
      "color": "a2eeef"
    }
  ],
  "url": "https://github.com/phyter1/main/issues/15",
  "createdAt": "2026-02-05T00:01:28Z"
}
