{
  "techStack": {
    "language": "TypeScript",
    "runtime": "Bun",
    "framework": "Next.js 16 (App Router)",
    "react": "19.2.0 with React Compiler",
    "styling": "Tailwind CSS 4",
    "uiComponents": "shadcn/ui (new-york style)",
    "testing": "bun:test with @happy-dom/global-registrator",
    "linting": "Biome",
    "aiSdk": "Vercel AI SDK with OpenAI provider (gpt-4.1-nano)",
    "fonts": "Fira Sans, Fira Mono (next/font/google)",
    "packageManager": "Bun"
  },
  "existingAiImplementation": {
    "routes": [
      "src/app/api/chat/route.ts - Streaming chat with resume context",
      "src/app/api/fit-assessment/route.ts - Structured job fit assessment"
    ],
    "config": "src/lib/ai-config.ts - OpenAI client creation, rate limits, model constants",
    "resumeData": "src/data/resume.ts - Resume structure and LLM context formatting",
    "inputValidation": "src/lib/input-sanitization.ts - 5-layer validation, prompt injection detection",
    "systemPrompts": "Embedded in route files with KEY FACTS, VOICE, and SCOPE sections",
    "model": "gpt-4.1-nano (locked, no parameters)",
    "rateLimiting": "In-memory per-IP tracking, 10 req/min, GuardrailViolation responses"
  },
  "authenticationPatterns": {
    "current": "None - no middleware.ts exists",
    "required": "Environment variable password or NextAuth.js for /admin routes",
    "middleware": "Need to create middleware.ts for path-based auth"
  },
  "directoryStructure": {
    "app": "src/app/ - Next.js App Router pages and API routes",
    "components": "src/components/ - React components (ui/, layout/, sections/, effects/)",
    "lib": "src/lib/ - Utility functions and configs",
    "data": "src/data/ - Resume data structures",
    "hooks": "src/hooks/ - React custom hooks",
    "types": "src/types/ - TypeScript type definitions"
  },
  "testingPatterns": {
    "framework": "bun:test",
    "mocking": "Mock AI SDK before imports, dynamic imports in beforeEach()",
    "structure": "*.test.ts files colocated with source, *.integration.test.ts for integration tests",
    "coverage": "Separate scripts for lib, components, api, pages, integration",
    "aiMocking": "Mock streamText, generateObject with intelligent responses based on input"
  },
  "codeConventions": {
    "importAlias": "@/* maps to src/*",
    "indentation": "2 spaces (Biome)",
    "testFiles": "*.test.ts colocated with source files",
    "components": "React Server Components by default (rsc: true)",
    "apiRoutes": "Named export POST/GET functions",
    "errorHandling": "GuardrailViolation type with educational details"
  },
  "newFilesToCreate": [
    "middleware.ts - Auth middleware for /admin routes",
    "src/app/admin/agent-workbench/page.tsx - Main workbench interface",
    "src/app/admin/agent-workbench/layout.tsx - Auth wrapper layout",
    "src/components/admin/PromptEditor.tsx - Conversational prompt editor",
    "src/components/admin/TestRunner.tsx - Test suite interface",
    "src/components/admin/PromptDiff.tsx - Diff viewer for prompts",
    "src/components/admin/ResumeUpdater.tsx - Resume data editor",
    "src/app/api/admin/refine-prompt/route.ts - Prompt refinement API",
    "src/app/api/admin/test-prompt/route.ts - Testing API",
    "src/app/api/admin/update-resume/route.ts - Resume update API",
    "src/app/api/admin/deploy-prompt/route.ts - Deployment API",
    "src/lib/prompt-versioning.ts - Version control utilities",
    "src/lib/test-runner.ts - Test execution engine",
    "src/lib/auth.ts - Authentication utilities"
  ],
  "filesToModify": [
    "src/app/api/chat/route.ts - Make prompt configurable/loadable",
    "src/app/api/fit-assessment/route.ts - Make prompt configurable/loadable",
    "src/data/resume.ts - Support dynamic updates",
    ".env.local.example - Add ADMIN_PASSWORD config"
  ],
  "issueKeywords": [
    "agent workbench",
    "prompt refinement",
    "testing interface",
    "authentication",
    "admin routes",
    "conversational editor",
    "side-by-side comparison",
    "version history",
    "resume updates",
    "test runner",
    "diff viewer"
  ],
  "dependencies": {
    "existing": [
      "@ai-sdk/openai - OpenAI provider for Vercel AI SDK",
      "ai - Vercel AI SDK for streamText/generateObject",
      "zod - Schema validation",
      "lucide-react - Icons",
      "tailwind-merge - className utilities",
      "framer-motion - Animations",
      "date-fns - Date utilities"
    ],
    "needed": [
      "bcryptjs or argon2 - Password hashing for auth",
      "next-themes - Dark mode support (if needed)",
      "react-diff-viewer - Diff visualization (or build custom)",
      "prismjs or highlight.js - Syntax highlighting for prompts"
    ]
  }
}
